{
  "system_prompt": "You are an elite AI trading specialist for Indian stock markets with expertise in technical analysis, candlestick patterns, and precise trade execution. You provide highly specific trade predictions including exact entry/exit points, stop-loss levels, and risk management parameters. Your analysis combines technical indicators, pattern recognition, and market microstructure to generate actionable trading signals.",
  
  "prompts": {
    "trade_direction_prediction": "Analyze the comprehensive market data for {symbol} and provide precise trade prediction:\n\nMARKET DATA:\nCurrent Price: ₹{current_price}\nDay Range: ₹{day_low} - ₹{day_high}\nVolume: {volume:,} (Avg: {avg_volume:,})\nVolume Ratio: {volume_ratio:.2f}x\n\nTECHNICAL INDICATORS:\nRSI(14): {rsi:.2f}\nMACD: {macd:.4f} | Signal: {macd_signal:.4f}\nStochastic: {stoch_k:.2f} | {stoch_d:.2f}\nSMA(20): ₹{sma_20:.2f} | SMA(50): ₹{sma_50:.2f}\nBollinger Bands: ₹{bb_lower:.2f} - ₹{bb_upper:.2f}\nATR(14): ₹{atr:.2f}\n\nCANDLESTICK PATTERN:\n{candlestick_pattern}\nPattern Strength: {pattern_strength}/10\nConfirmation: {pattern_confirmed}\n\nMARKET CONTEXT:\nSector Performance: {sector_performance}\nMarket Sentiment: {market_sentiment}\nVIX Level: {vix_level}\nFII/DII Flow: {institutional_flow}\n\nCUSTOM INPUTS:\n{custom_inputs}\n\nPROVIDE PRECISE PREDICTION:\n1. TRADE DIRECTION: BUY/SELL/SHORT_SELL/HOLD\n2. CONFIDENCE: 0-100% (based on signal strength)\n3. ENTRY PRICE: Optimal entry level with reasoning\n4. TARGET PRICE: Primary profit target\n5. STOP LOSS: Risk management level\n6. POSITION SIZE: % of portfolio (risk-adjusted)\n7. RISK-REWARD RATIO: Expected R:R\n8. TIME HORIZON: Expected holding period\n9. EXECUTION STRATEGY: Order type and timing\n10. KEY REASONS: Top 3 technical factors\n11. RISK FACTORS: Top 3 concerns\n\nFormat as JSON:\n{\n  \"trade_direction\": \"BUY\",\n  \"confidence\": 87.5,\n  \"entry_price\": 1245.75,\n  \"entry_reasoning\": \"Breakout above resistance with volume confirmation\",\n  \"target_price\": 1320.50,\n  \"target_reasoning\": \"Next resistance level at 61.8% extension\",\n  \"stop_loss\": 1195.25,\n  \"stop_reasoning\": \"Below key support and pattern invalidation\",\n  \"position_size_percent\": 4.2,\n  \"risk_reward_ratio\": 2.8,\n  \"time_horizon\": \"2-3 weeks\",\n  \"order_type\": \"LIMIT\",\n  \"execution_timing\": \"First 30 minutes post market open\",\n  \"technical_reasons\": [\"RSI bullish divergence\", \"Volume breakout\", \"Pattern completion\"],\n  \"risk_factors\": [\"Market volatility\", \"Sector rotation\", \"Global cues\"],\n  \"additional_targets\": [1290.00, 1350.00],\n  \"trailing_stop\": \"Move to breakeven after 1.5% profit\"\n}",
    
    "candlestick_pattern_analysis": "Perform expert candlestick pattern analysis for {symbol}:\n\nOHLC DATA (Last 5 sessions):\n{ohlc_data}\n\nVOLUME ANALYSIS:\n{volume_data}\n\nPREVIOUS PATTERNS:\n{historical_patterns}\n\nMARKET CONTEXT:\nTrend: {market_trend}\nVolatility: {volatility_level}\n\nIDENTIFY AND ANALYZE:\n1. PRIMARY PATTERN: Most significant current pattern\n2. PATTERN TYPE: Bullish/Bearish/Neutral reversal or continuation\n3. FORMATION QUALITY: How well-formed is the pattern (1-10)\n4. CONFIRMATION STATUS: Is pattern confirmed or pending\n5. RELIABILITY: Historical success rate for this pattern\n6. SUPPORTING PATTERNS: Any secondary patterns\n7. VOLUME CONFIRMATION: Volume supporting the pattern\n8. TARGET PROJECTION: Price target based on pattern\n9. INVALIDATION LEVEL: Where pattern becomes invalid\n10. TIMING: Expected timeframe for pattern completion\n\nProvide detailed analysis in JSON:\n{\n  \"primary_pattern\": \"bullish_engulfing\",\n  \"pattern_name\": \"Bullish Engulfing\",\n  \"signal_type\": \"BULLISH_REVERSAL\",\n  \"formation_quality\": 8.5,\n  \"confirmation_status\": \"CONFIRMED\",\n  \"reliability_percent\": 72.5,\n  \"volume_confirmation\": \"Strong volume spike on engulfing candle\",\n  \"pattern_target\": 1295.50,\n  \"invalidation_level\": 1180.25,\n  \"timeframe_expectation\": \"3-7 trading sessions\",\n  \"supporting_patterns\": [\"hammer_base\", \"bullish_doji\"],\n  \"confluence_factors\": [\"Support level bounce\", \"RSI oversold recovery\"],\n  \"action_recommendation\": \"STRONG_BUY\",\n  \"pattern_description\": \"Textbook bullish engulfing formed at key support with volume confirmation\"\n}",
    
    "short_sell_analysis": "Analyze short selling opportunity for {symbol}:\n\nCURRENT SETUP:\nPrice: ₹{current_price}\nResistance: ₹{resistance_level}\nBearish Pattern: {bearish_pattern}\n\nSHORT SELLING FACTORS:\nDowntrend Confirmation: {downtrend_signals}\nVolume Analysis: {volume_trend}\nTechnical Breakdown: {breakdown_levels}\nSector Weakness: {sector_analysis}\n\nRISK ASSESSMENT:\nShort Interest: {short_interest}%\nMargin Requirements: {margin_req}%\nBorrowing Availability: {stock_availability}\nVolatility Risk: {volatility_risk}\n\nPROVIDE SHORT SELL RECOMMENDATION:\n1. SHORT VIABILITY: Yes/No with confidence\n2. ENTRY PRICE: Optimal short entry\n3. COVER TARGET: Primary profit target\n4. STOP LOSS: Risk management (above resistance)\n5. POSITION SIZE: Risk-adjusted size\n6. HOLDING PERIOD: Expected duration\n7. EXECUTION STRATEGY: Best approach for shorting\n8. RISK FACTORS: Key risks specific to shorting\n\nJSON Response:\n{\n  \"short_recommendation\": \"YES\",\n  \"confidence\": 78.5,\n  \"entry_price\": 2450.25,\n  \"cover_target\": 2280.00,\n  \"stop_loss\": 2520.75,\n  \"position_size_percent\": 2.5,\n  \"expected_duration\": \"1-2 weeks\",\n  \"execution_strategy\": \"Short on breakdown below support\",\n  \"margin_impact\": \"Requires 50% margin\",\n  \"short_risks\": [\"Squeeze risk\", \"Dividend risk\", \"Borrow cost\"],\n  \"technical_confirmation\": [\"Resistance rejection\", \"Volume spike down\", \"Pattern breakdown\"]\n}",
    
    "risk_reward_optimization": "Optimize risk-reward parameters for {symbol} trade:\n\nTRADE SETUP:\nDirection: {trade_direction}\nEntry: ₹{entry_price}\nCurrent: ₹{current_price}\n\nVOLATILITY METRICS:\nATR(14): ₹{atr}\nHistorical Vol: {hist_vol}%\nImplied Vol: {impl_vol}%\n\nSUPPORT/RESISTANCE:\nKey Levels: {key_levels}\nPivot Points: {pivot_points}\n\nPORTFOLIO CONTEXT:\nAvailable Capital: ₹{capital}\nRisk Tolerance: {risk_tolerance}\nExisting Exposure: {current_exposure}%\n\nOPTIMIZE FOR:\n1. POSITION SIZE: Optimal % based on volatility\n2. STOP LOSS: Multiple levels (conservative/aggressive)\n3. TARGETS: Primary and secondary targets\n4. RISK-REWARD: Optimal R:R ratio\n5. SCALING STRATEGY: Partial profit taking\n6. ADJUSTMENT RULES: When to modify levels\n\nProvide optimization in JSON:\n{\n  \"optimal_position_size\": 3.8,\n  \"position_reasoning\": \"Based on 1% risk per ATR unit\",\n  \"stop_loss_levels\": {\n    \"conservative\": 1195.50,\n    \"moderate\": 1205.25,\n    \"aggressive\": 1215.00\n  },\n  \"target_levels\": {\n    \"primary\": 1295.75,\n    \"secondary\": 1335.00,\n    \"extended\": 1385.50\n  },\n  \"risk_reward_ratios\": [2.1, 3.2, 4.8],\n  \"scaling_strategy\": \"Take 30% profit at primary target\",\n  \"trailing_stop\": \"Move to breakeven after 1.5% profit\",\n  \"adjustment_triggers\": [\"Pattern invalidation\", \"Volume divergence\", \"Time stop at 5 days\"]\n}"
  },
  
  "metadata": {
    "version": "2.0",
    "created": "2025-09-06",
    "description": "Advanced trade prediction prompts with precise entry/exit analysis",
    "specialization": "Trade direction, candlestick patterns, short selling, risk optimization",
    "last_updated": "2025-09-06"
  }
}
